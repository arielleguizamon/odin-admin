<header-home></header-home>
<style media="screen">
  .control-label {
    text-align:right;
  }
</style>

<div class="content-wrapper">
    <breadcrumbs data-type="{{ 'ADD' | translate }}" data-model-name="{{ 'WEBSERVICE' | translate }}" data-model="{{type}}"></breadcrumbs>
    <!-- Main content -->
    <section class="content">
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">{{ 'ADD' | translate }}
                        {{ 'WEBSERVICE' | translate }}</h3>
                </div>
                <section class="content">

                    <div class="row">

                        <ul class="steps">
                            <li ng-class="step(0)" ng-click="checkstep(0)" class=" col-xs-4">
                                <p>
                                    1.
                                    {{ 'CHARGE_OF_WEBSERVICE' | translate | uppercase }}</p>
                            </li>
                            <li ng-class="step(1)" ng-click="checkstep(1)" class=" col-xs-4">
                                <p>
                                    2.
                                    {{ 'CHARGE_OF_DATA' | translate | uppercase }}</p>
                            </li>
                            <li ng-class="step(2)" ng-click="checkstep(2)" class=" col-xs-4">
                                <p>
                                    3.
                                    {{ 'REVISION' | translate | uppercase }}</p>
                            </li>
                        </ul>

                    </div>

                    <div class="row">

                        <!-- Input url -->
                        <div class="form-group" ng-show="stepactive == 0">
                            <label for="url" class="col-sm-2 control-label">*
                                {{ 'WEBSERVICE_URL' | translate }}</label>
                            <div class="col-sm-10" ng-class="{ 'has-error': form.url.$touched && form.url.$invalid }">
                                <input type="text" id="url" ng-model="model.url" name="url" class="form-control" id="url" placeholder="{{ 'PLACE' | translate }} {{ 'WEBSERVICE_URL' | translate }} {{ 'HERE' | translate }}"/>
                                <div class="help-block" ng-messages="form.url.$error" ng-if="form.url.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                        <!-- end Input url -->
                    </div>
                    <div class="row">
                        <!-- select ws_type -->
                        <div class="form-group" ng-show="stepactive == 0">
                            <label for="ws_type" class="col-sm-2 control-label">*{{ 'WEBSERVICE_TYPE' | translate }}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.ws_type.$touched && form.ws_type.$invalid }">
                                <select data-key="ws_type" data-modelname="ws_type" data-model="{{model.ws_type}}" name="ws_type" id="ws_type" ng-model="model.ws_type" class="form-control" required data-dis='{{ws_type_disabled}}'>
                                    <option value="" default disabled selected="selected">{{ 'SELECT_OPTION' | translate }}</option>
                                    <option value="rest">REST</option>
                                    <option value="soap">SOAP</option>
                                </select>

                                <div class="help-block" ng-messages="form.ws_type.$error" ng-if="form.ws_type.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <!-- input data_url -->
                        <div class="form-group" ng-if="stepactive == 0 && model.ws_type == 'rest' ">
                            <label for="data_url" class="col-sm-2 control-label">* {{'DATA_URL' | translate}}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.data_url.$touched && form.data_url.$invalid }">
                                <input type="text" id="data_url" ng-model="model.data_url" name="data_url" class="form-control" id="data_url" placeholder="{{ 'PLACE' | translate }} {{ 'DATA_URL' | translate }} {{ 'HERE' | translate }}"/>
                                <div class="help-block" ng-messages="form.data_url.$error" ng-if="form.data_url.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- authentication type -->
                    <div class="row">
                        <div class="form-group" ng-if="stepactive == 0 && model.ws_type == 'rest' ">
                            <label for="auth_type" class="col-sm-2 control-label">* {{'AUTH_TYPE' | translate}}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.auth_type.$touched && form.auth_type.$invalid }">
                                <select data-key="auth_type" data-modelname="auth_type" data-model="{{model.auth_type}}" name="auth_type" id="auth_type" ng-model="model.auth_type" class="form-control" required data-dis='{{auth_type_disabled}}'>
                                    <option value="" default disabled selected="selected">{{ 'SELECT_OPTION' | translate }}</option>
                                    <option value="token">{{'TOKEN' | translate}}</option>
                                    <option value="user_password">{{ 'USER_PASSWORD' | translate }}</option>
                                </select>

                                <div class="help-block" ng-messages="form.auth_type.$error" ng-if="form.auth_type.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- token inputs -->
                    <div class="row">
                        <div class="form-group" ng-if="stepactive == 0 && model.ws_type == 'rest' && model.auth_type == 'token' ">
                            <label for="sign_name" class="col-sm-2 control-label">* {{ 'FIRM_NAME' | translate }}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.sign_name.$touched && form.sign_name.$invalid }">
                                <input type="text" id="sign_name" ng-model="model.sign_name" name="sign_name" class="form-control" id="sign_name" placeholder="{{ 'WRITE' | translate }} {{ 'FIRM_NAME' | translate }} {{ 'HERE' | translate }}"/>
                                <div class="help-block" ng-messages="form.sign_name.$error" ng-if="form.sign_name.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group" ng-if="stepactive == 0 && model.ws_type == 'rest' && model.auth_type == 'token' ">
                            <label for="sign_token" class="col-sm-2 control-label">* {{ 'TOKEN_FOR_FIRM' | translate }}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.sign_token.$touched && form.sign_token.$invalid }">
                                <input type="text" id="sign_token" ng-model="model.sign_token" name="sign_token" class="form-control" id="sign_token" placeholder="{{ 'WRITE' | translate }} {{ 'TOKEN_FOR_FIRM' | translate }} {{ 'HERE' | translate }}"/>
                                <div class="help-block" ng-messages="form.sign_token.$error" ng-if="form.sign_token.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group" ng-if="stepactive == 0 && model.ws_type == 'rest' && model.auth_type == 'token' ">
                            <label for="sign_algorithm" class="col-sm-2 control-label">* {{'ALGORITHM_FOR_FIRM' | translate}}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.sign_algorithm.$touched && form.sign_algorithm.$invalid }">
                                <input type="text" id="sign_algorithm" ng-model="model.sign_algorithm" name="sign_algorithm" class="form-control" id="sign_algorithm" placeholder="{{ 'WRITE' | translate }} {{ 'ALGORITHM_FOR_FIRM' | translate }} {{ 'HERE' | translate }}"/>
                                <div class="help-block" ng-messages="form.sign_algorithm.$error" ng-if="form.sign_algorithm.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- user and password inputs -->
                    <div class="row">
                        <div class="form-group" ng-if="stepactive == 0 && model.ws_type == 'rest' && model.auth_type == 'user_password' ">
                            <label for="user" class="col-sm-2 control-label">* {{ 'USER' | translate }}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.user.$touched && form.user.$invalid }">
                                <input type="text" id="user" ng-model="model.user" name="user" class="form-control" id="user" placeholder="{{ 'WRITE' | translate }} {{ 'USER' | translate }} {{ 'HERE' | translate }}"/>
                                <div class="help-block" ng-messages="form.user.$error" ng-if="form.user.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group" ng-if="stepactive == 0 && model.ws_type == 'rest' && model.auth_type == 'user_password' ">
                            <label for="password" class="col-sm-2 control-label">* {{'PASSWORD' | translate}}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.password.$touched && form.password.$invalid }">
                                <input type="text" id="password" ng-model="model.password" name="password" class="form-control" id="password" placeholder="{{ 'WRITE' | translate }} {{ 'PASSWORD' | translate }} {{ 'HERE' | translate }}"/>
                                <div class="help-block" ng-messages="form.password.$error" ng-if="form.password.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ws_type: SOAP inputs -->

                    <!-- method-->
                    <div class="row">
                        <div class="form-group" ng-if="stepactive == 0 && model.ws_type == 'soap' ">
                            <label for="method" class="col-sm-2 control-label">* {{'METHOD' | translate}}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.method.$touched && form.method.$invalid }">
                                <input type="text" id="method" ng-model="model.method" name="method" class="form-control" id="method" placeholder="{{ 'WRITE' | translate }} {{ 'METHOD' | translate }} {{ 'HERE' | translate }}"/>
                                <div class="help-block" ng-messages="form.method.$error" ng-if="form.method.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- namespace-->
                    <div class="row">
                        <div class="form-group" ng-if="stepactive == 0 && model.ws_type == 'soap'">
                            <label for="namespace" class="col-sm-2 control-label">* {{'NAMESPACE' | translate}}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.namespace.$touched && form.namespace.$invalid }">
                                <input type="text" id="namespace" ng-model="model.namespace" name="namespace" class="form-control" id="namespace" placeholder="{{ 'WRITE' | translate }} {{ 'NAMESPACE' | translate }} {{ 'HERE' | translate }}"/>
                                <div class="help-block" ng-messages="form.namespace.$error" ng-if="form.namespace.$touched">
                                    <div ng-messages-include="views/messages.html"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group" ng-if="stepactive == 0 && model.ws_type == 'soap'">
                            <label for="attrs_as_headers" class="col-sm-2 control-label">* {{'USE_ATTRS_HEADERS'}}</label>
                            <div class="col-sm-10" ng-class="{'has-error': form.attrs_as_headers.$touched && form.attrs_as_headers.$invalid }">
                              <div class="form-group">
                                  <label for="attrs_as_headers" class="control-sidebar-subheading">
                                      <input name="attrs_as_headers" ng-model="model.attrs_as_headers" type="checkbox" class="checkbox icheck">
                                  </label>

                              </div>
                            </div>
                        </div>
                    </div>

                    <div class="row" ng-show="stepactive == 1">
                        <div class="col-xs-12">
                            <form autocomplete="off" enctype="multipart/form-data" class="form-horizontal" name="form" autocomplete="false" role="form" ng-submit="add(form.$valid)" novalidate>
                                <div class="box-body" ng-include="'views/file/_form.html'"></div>

                            </form>
                        </div>
                    </div>
                    <div class="row" ng-show="stepactive == 2">
                        <div class="col-md-12">
                            <div class="box box-primary">
                                <div class="box-header with-border">
                                    <h3 class="box-title">{{ 'DETAILS_FOR' | translate }}</b>
                                </h3>
                            </div>
                            <div class="box-body table-responsive no-padding">
                                <div class="progress" ng-if="stepactive == 2">
                                    <div class="progress-bar progress-bar-danger progress-bar-striped" role="progressbar" aria-valuenow="{{uploadImageProgress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{uploadImageProgress}}%">
                                        {{uploadImageProgress}}%
                                        {{ 'COMPLETE' | translate }}
                                    </div>
                                </div>
                                <table class="table usertable">
                                    <tr ng-if="model.name">
                                        <td class="detail-bold">{{ 'NAME' | translate }}</td>
                                        <td>{{model.name}}</td>
                                    </tr>
                                    <tr ng-if="model.description">
                                        <td class="detail-bold">{{ 'DESCRIPTION' | translate }}</td>
                                        <td ng-bind-html="getHtml(model.description)"></td>
                                    </tr>
                                    <tr ng-if="model.dataset">
                                        <td class="detail-bold">{{ 'DATASET' | translate }}</td>
                                        <td>{{model.dataset.name| selectFilterArray:'dataset'}}</td>
                                    </tr>
                                    <tr ng-if="model.status">
                                        <td class="detail-bold">{{ 'STATUS' | translate }}</td>
                                        <td>{{model.status| selectFilterArray:'status'}}</td>
                                    </tr>
                                    <tr ng-if="model.organization">
                                        <td class="detail-bold">{{ 'ORGANIZATION' | translate }}</td>
                                        <td>{{model.organization.name| selectFilterArray:'organization'}}</td>
                                    </tr>
                                    <tr ng-if="model.updateFrequency">
                                        <td class="detail-bold">{{ 'FREQUENCY' | translate }}</td>
                                        <td>{{model.updateFrequency| selectFilterArray:'frecuency'}}</td>
                                    </tr>
                                    <tr ng-if="model.owner">
                                        <td class="detail-bold">{{ 'OWNER' | translate }}</td>
                                        <td>{{model.owner| selectFilterArray:'owner'}}</td>
                                    </tr>
                                    <tr ng-if="model.notes">
                                        <td class="detail-bold">{{ 'NOTES' | translate }}</td>
                                        <td ng-bind-html="getHtml(model.notes)"></td>
                                    </tr>
                                    <tr ng-if="model.type">
                                        <td class="detail-bold">{{ 'TYPE' | translate }}</td>
                                        <td>{{model.type.name| selectFilterArray:'type'}}</td>
                                    </tr>
                                    <tr ng-if="model.gatheringDate">
                                        <td class="detail-bold">{{ 'GATHERING_DATE' | translate }}</td>
                                        <td>{{model.gatheringDate| date:'MMM d, y' : 'UTC' }}</td>
                                    </tr>
                                    <tr>
                                        <td class="detail-bold">{{ 'UPDATED_VIEW' | translate }}</td>
                                        <td>
                                            <span class="label label-default">{{model.updated ? 'Si' : 'No'}}</span>
                                        </td>
                                    </tr>
                                    <tr ng-repeat="item in model.items">
                                        <td class="detail-bold">{{item.field1}}</td>
                                        <td>{{item.field2}}</td>
                                    </tr>

                                </table>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="box-footer">
            <button class="btn btn-default pull-left" back-button ng-if="dataset_disabled == 'disabled'">
                {{ 'BACK' | translate }}
            </button>
            <button class="btn btn-default pull-left" ng-click="checkstep(stepactive - 1)" ng-disabled="stepactive == 0" ng-if="dataset_disabled == 'enabled'">
                {{ 'BACK' | translate }}
            </button>
            <button ng-if="stepactive == 0" ng-disabled="model.url == '' || model.ws_type == ''" type="submit" class="btn btn-primary pull-right" ng-click="checkstep(stepactive + 1)">{{ 'NEXT' | translate }}</button>
            <button ng-if="stepactive == 1 && unsave" type="submit" class="btn btn-primary pull-right" ng-click="checkstep(stepactive + 1)" ng-disabled="form.$invalid">{{ 'NEXT' | translate }}</button>
            <button ng-if="stepactive == 2 && unsave" type="submit" class="btn btn-primary pull-right" ng-click="add(model)" ng-disabled="form.$invalid">{{ 'SAVE' | translate }}</button>

        </div>
    </div>
    <!-- ./ Main content -->
</div>
</div>
</section>
<!--  Main content-->
</div>
<footer-home></footer-home>
