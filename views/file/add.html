<header-home></header-home>
<div class="content-wrapper">

<breadcrumbs data-type="{{ 'ADD' | translate }}" data-model-name="{{ 'FILE' | translate }}" data-model="{{type}}"></breadcrumbs>
    <!-- Main content -->
    <section class="content">
        <div class="row">
            <div class="col-md-12">
                <div class="box box-primary">
                    <div class="box-header with-border">
                      <h3 class="box-title">{{ 'ADD' | translate }} {{ 'FILE' | translate }}</h3>
                    </div>
                  <!--  <form autocomplete="off"   enctype="multipart/form-data" class="form-horizontal" name="form"  autocomplete="false"  role="form" ng-submit="add(form.$valid)" novalidate>
                        <div class="box-body" ng-include="'views/file/_form.html'"></div>
                    </form>-->
                    <div class="row">
                        <div class="col-xs-12">

                            <ul class="steps">
                              <li ng-class="step(0)" ng-click="checkstep(0)" class=" col-xs-4">
                                <p>{{ 'CHARGE_OF_FILE' | translate }}</p>
                            </li>
                              <li  ng-class="step(1)" ng-click="checkstep(1)"  class=" col-xs-4">
                                <p>{{ 'DATA_OF_FILE' | translate }}</p>
                            </li>
                              <li ng-class="step(2)" ng-click="checkstep(2)"  class=" col-xs-4">
                                <p>{{ 'REVISION' | translate }}</p>
                            </li>
                            </ul>

                        </div>
                    </div>
                    <div class="row" ng-show="stepactive == 0">
                        <div class="col-md-6 col-md-offset-3">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h1>{{ 'FILES' | translate }}</h1>

                                        <div ngf-select ng-model="model.uploadFile" name="uploadFile" ngf-pattern="'application/x-zip-compressed,text/yaml,text/csv,text/html,text/calendar,application/pdf,application/x-rar-compressed,application/rss+xml,application/octet-stream,application/vnd.ms-excel,application/xml,application/zip,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'"
                                        ngf-accept="'application/x-zip-compressed,text/yaml,text/csv,text/html,text/calendar,application/pdf,application/x-rar-compressed,application/rss+xml,application/octet-stream,application/vnd.ms-excel,application/xml,application/zip,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'" ngf-max-size="20MB" ngf-min-height="100"
                                        ngf-resize="{width: 100, height: 100}"   ngf-before-model-change="beforeChange($files)"><i class="fa fa-plus add-image-button" aria-hidden="true"></i></div>
                                </div>
                                <div class="panel-body docuemnts-upload">
                                    <div class="row" ng-if="fileModel.name" >
                                        <div class="col-xs-2 typeImageUpload">
                                            <i class="fa {{fileModel.type}}" aria-hidden="true"></i>
                                        </div>
                                        <div class="col-xs-8">
                                            <h4>{{fileModel.name}}</h4>
                                        </div>
                                        <div class="col-xs-2 close" ng-click="clearUpload()">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                        </div>
                                    </div>
                              </div>
                            </div>
                        </div>

                    </div>
                    <div class="row" ng-show="stepactive == 1">
                        <div class="col-xs-12">
                            <form autocomplete="off"   enctype="multipart/form-data" class="form-horizontal" name="form"  autocomplete="false"  role="form" ng-submit="add(form.$valid)" novalidate>
                        <div class="box-body" ng-include="'views/file/_form.html'"></div>

                    </form>
                        </div>
                    </div>
                    <div class="row" ng-show="stepactive == 2">
                               <div class="col-md-12">
                <div class="box box-primary">
                    <div class="box-header with-border">
                      <h3 class="box-title">{{ 'DETAILS_FOR' | translate }}</b></h3>
                    </div>
	                <div class="progress" ng-if="stepactive == 2" >
	                  <div class="progress-bar progress-bar-danger progress-bar-striped" role="progressbar" aria-valuenow="{{uploadImageProgress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{uploadImageProgress}}%">
	                   {{uploadImageProgress}}% {{ 'COMPLETE' | translate }}
	                  </div>
	                </div>
                      <table class="table usertable">
                        <tr ng-if="model.name">
                            <td>{{ 'NAME' | translate }}</td>
                            <td>{{model.name}}</td>
                        </tr>

                        <tr ng-if="model.type">
                            <td>{{ 'TYPE' | translate }}</td>
                            <td>{{model.type.name |  selectFilterArray:'type'}}</td>
                        </tr>
                        <tr ng-if="model.status">
                            <td>{{ 'STATUS' | translate }}</td>
                            <td>{{model.status | selectFilterArray:'status'}}</td>
                        </tr>
                        <tr ng-if="model.organization">
                            <td>{{ 'ORGANIZATION' | translate }}</td>
                            <td>{{model.organization.name |  selectFilterArray:'organization'}}</td>
                        </tr>

                        <tr ng-if="model.dataset">
                            <td>{{ 'DATASET' | translate }}</td>
                            <td>{{model.dataset.name |  selectFilterArray:'dataset'}}</td>
                        </tr>
                        <tr ng-if="model.createdBy">
                            <td>{{ 'CREATED_BY' | translate }}</td>
                            <td>{{model.createdBy.username}}</td>
                        </tr>
                        <tr ng-if="model.description">
                            <td>{{ 'DESCRIPTION' | translate }}</td>
                            <td ng-bind-html="getHtml(model.description)"></td>
                        </tr>

                        <tr ng-if="model.notes">
                            <td>{{ 'NOTES' | translate }}</td>
                            <td ng-bind-html="getHtml(model.notes)"></td>
                        </tr>
                        <tr ng-if="model.url">
                            <td>{{ 'URL' | translate }}</td>
                            <td><a target="_blank" ng-href="{{model.url}}">{{model.url}}</a></td>
                        </tr>
                        <tr ng-if="model.visibility">
                            <td>{{ 'VISIVILITY' | translate }}</td>
                            <td>{{model.visibility}}</td>
                        </tr>
                        <tr ng-if="model.updateFrequency">
                            <td>{{ 'FREQUENCY' | translate }}</td>
                            <td>{{model.updateFrequency |  selectFilterArray:'frecuency'}}</td>
                        </tr>
                        <tr ng-if="model.tags">
                            <td>{{ 'TAGS' | translate }}</td>
                            <td>{{model.tags |  selectFilterArray:'tags'}}</td>
                        </tr>
                        <tr ng-if="model.owner">
                            <td>{{ 'OWNER' | translate }}</td>
                            <td>{{model.owner |  selectFilterArray:'owner'}}</td>
                        </tr>
                      </table>

                </div>

                    </div>
                </div>
<div class="box-footer">
    <button class="btn btn-default pull-left" back-button ng-if="dataset_disabled=='disabled'">
        {{ 'BACK' | translate }}
    </button>
    <button class="btn btn-default pull-left" ng-click="checkstep(stepactive - 1)" ng-disabled="stepactive==0" ng-if="dataset_disabled=='enabled'">
        {{ 'BACK' | translate }}
    </button>
    <button ng-if="stepactive != 2" type="submit" class="btn btn-primary pull-right" ng-click="checkstep(stepactive + 1)" ng-disabled="(!fileModel.name) || (form.$invalid && stepactive == 1) || (stepactive == 2)">{{ 'NEXT' | translate }}</button>
    <button ng-if="stepactive == 2" type="submit" class="btn btn-primary pull-right" ng-click="add(model)" ng-disabled="form.$invalid">{{ 'SAVE' | translate }}</button>

</div>            </div>
        </div>
    </section>
    <!--  Main content-->

</div>




<footer-home></footer-home>
